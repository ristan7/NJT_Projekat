{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mikir\\\\Documents\\\\NetBeansProjects\\\\NJT_Projekat\\\\e_learning_platform_njt_frontend\\\\src\\\\pages\\\\Notifications.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Notifications.jsx\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { getMe, getNotifications, markNotificationRead, markAllNotificationsRead, getNotificationTypes } from \"../api/api\";\nimport \"../css/Notifications.css\"; // ako već imaš; nije obavezno\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Notifications() {\n  _s();\n  const [me, setMe] = useState(null);\n  const [rows, setRows] = useState([]); // Sirove notifikacije (sve za korisnika)\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [onlyUnread, setOnlyUnread] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [sortKey, setSortKey] = useState(\"DATE_DESC\"); // DATE_DESC | DATE_ASC | TITLE_ASC | TITLE_DESC | TYPE_ASC | TYPE_DESC\n\n  const [marking, setMarking] = useState({}); // { [id]: true } dok traje POST\n\n  // Mapa tipova: { [typeId]: 'Payment Received' ... }\n  const [typesMap, setTypesMap] = useState({});\n\n  // ---- Helpers -----------------------------------------------------\n\n  function getTypeName(n) {\n    var _ref, _ref2, _n$notificationTypeId, _n$type$notificationT;\n    // pokrij moguće polja iz DTO-a\n    const id = (_ref = (_ref2 = (_n$notificationTypeId = n.notificationTypeId) !== null && _n$notificationTypeId !== void 0 ? _n$notificationTypeId : n.typeId) !== null && _ref2 !== void 0 ? _ref2 : n.type && ((_n$type$notificationT = n.type.notificationTypeId) !== null && _n$type$notificationT !== void 0 ? _n$type$notificationT : n.type.id)) !== null && _ref !== void 0 ? _ref : n.type;\n    return id && typesMap[id] ? typesMap[id] : \"—\";\n  }\n  function fmtDate(iso) {\n    if (!iso) return \"—\";\n    try {\n      const d = new Date(iso);\n      return d.toLocaleString(\"sr-RS\", {\n        dateStyle: \"short\",\n        timeStyle: \"short\"\n      });\n    } catch {\n      return iso;\n    }\n  }\n\n  // ---- Učitavanje podataka ----------------------------------------\n\n  useEffect(() => {\n    let mounted = true;\n    setLoading(true);\n    setError(\"\");\n\n    // 1) tipovi (jednom)\n    getNotificationTypes().then(list => {\n      if (!mounted) return;\n      const map = {};\n      (list || []).forEach(t => {\n        // backend vraća {id, name}\n        map[t.id] = t.name;\n      });\n      setTypesMap(map);\n    }).catch(() => {\n      if (!mounted) return;\n      setTypesMap({});\n    });\n\n    // 2) korisnik + sve njegove notifikacije\n    getMe({\n      userId: 1\n    }) // dok nema auth-a\n    .then(u => {\n      if (!mounted) return;\n      setMe(u);\n      return getNotifications({\n        userId: u.userId\n      }); // Uzmemo SVE; filtriraćemo i sort. na klijentu\n    }).then(list => {\n      if (!mounted) return;\n      setRows(Array.isArray(list) ? list : []);\n    }).catch(e => {\n      if (!mounted) return;\n      setError((e === null || e === void 0 ? void 0 : e.message) || \"Greška pri učitavanju notifikacija.\");\n    }).finally(() => {\n      if (!mounted) return;\n      setLoading(false);\n    });\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  // ---- Pretraga/Filter/Sort na klijentu ---------------------------\n\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n    let out = rows;\n    if (onlyUnread) {\n      out = out.filter(n => !n.read);\n    }\n    if (q) {\n      out = out.filter(n => {\n        const title = String(n.notificationTitle || n.title || \"\").toLowerCase();\n        const msg = String(n.message || n.notificationMessage || n.body || \"\").toLowerCase();\n        const typeName = getTypeName(n).toLowerCase();\n        return title.includes(q) || msg.includes(q) || typeName.includes(q);\n      });\n    }\n    const byTitle = (a, b) => String(a.notificationTitle || a.title || \"\").localeCompare(String(b.notificationTitle || b.title || \"\"), \"sr\");\n    const byTypeName = (a, b) => getTypeName(a).localeCompare(getTypeName(b), \"sr\");\n    const byDate = (a, b) => {\n      const da = a.sentAt ? new Date(a.sentAt).getTime() : 0;\n      const db = b.sentAt ? new Date(b.sentAt).getTime() : 0;\n      return da - db;\n    };\n    switch (sortKey) {\n      case \"TITLE_ASC\":\n        out = [...out].sort(byTitle);\n        break;\n      case \"TITLE_DESC\":\n        out = [...out].sort(byTitle).reverse();\n        break;\n      case \"TYPE_ASC\":\n        out = [...out].sort(byTypeName);\n        break;\n      case \"TYPE_DESC\":\n        out = [...out].sort(byTypeName).reverse();\n        break;\n      case \"DATE_ASC\":\n        out = [...out].sort(byDate); // starije prvo\n        break;\n      case \"DATE_DESC\":\n      default:\n        out = [...out].sort(byDate).reverse(); // novije prvo\n        break;\n    }\n    return out;\n  }, [rows, onlyUnread, search, sortKey, typesMap]);\n\n  // ---- Akcije ------------------------------------------------------\n\n  async function handleMarkOne(id) {\n    setMarking(m => ({\n      ...m,\n      [id]: true\n    }));\n    // Optimistički update: postavi read=true lokalno\n    const prev = rows;\n    setRows(all => all.map(n => n.notificationId === id || n.id === id ? {\n      ...n,\n      read: true\n    } : n));\n    try {\n      await markNotificationRead(id);\n    } catch (e) {\n      // Vrati staro stanje ako padne\n      setRows(prev);\n      console.error(e);\n    } finally {\n      setMarking(m => ({\n        ...m,\n        [id]: false\n      }));\n    }\n  }\n  async function handleMarkAll() {\n    if (!me) return;\n    try {\n      await markAllNotificationsRead(me.userId);\n      setRows(all => all.map(n => ({\n        ...n,\n        read: true\n      })));\n    } catch (e) {\n      console.error(e);\n      alert(\"Greška pri označavanju svih notifikacija.\");\n    }\n  }\n\n  // ---- Render ------------------------------------------------------\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container section notifications-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Notifikacije\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          className: \"btn ghost\",\n          to: \"/\",\n          children: \"Nazad na po\\u010Detnu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn primary\",\n          onClick: handleMarkAll,\n          children: \"Ozna\\u010Di sve kao pro\\u010Ditano\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-line muted\",\n      style: {\n        marginBottom: 16\n      },\n      children: me ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [me.firstName, \" \", me.lastName, \" \\u2022 \", me.userEmail]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"U\\u010Ditavanje korisnika\\u2026\"\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      style: {\n        display: \"flex\",\n        gap: 16,\n        alignItems: \"center\",\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        type: \"text\",\n        placeholder: \"Pretraga po naslovu, poruci ili tipu\\u2026\",\n        value: search,\n        onChange: e => setSearch(e.target.value),\n        style: {\n          flex: 1,\n          minWidth: 260\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"toggle muted\",\n        style: {\n          display: \"flex\",\n          gap: 8,\n          alignItems: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: onlyUnread,\n          onChange: e => setOnlyUnread(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Samo nepro\\u010Ditane\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"muted\",\n        style: {\n          display: \"flex\",\n          gap: 8,\n          alignItems: \"center\"\n        },\n        children: [\"Sort:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"input\",\n          value: sortKey,\n          onChange: e => setSortKey(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"optgroup\", {\n            label: \"Naslov\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"TITLE_ASC\",\n              children: \"Naslov A\\u2013\\u0160\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"TITLE_DESC\",\n              children: \"Naslov \\u0160\\u2013A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n            label: \"Datum\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"DATE_DESC\",\n              children: \"Najnovije\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"DATE_ASC\",\n              children: \"Najstarije\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n            label: \"Tip\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"TYPE_ASC\",\n              children: \"Tip A\\u2013\\u0160\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"TYPE_DESC\",\n              children: \"Tip \\u0160\\u2013A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert info\",\n      children: \"U\\u010Ditavam notifikacije\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 19\n    }, this), !!error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 19\n    }, this), !loading && filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert muted\",\n      children: \"Nema notifikacija za prikaz.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }, this), !loading && filtered.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: 48\n              },\n              children: \"#\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Naslov\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: 190\n              },\n              children: \"Tip\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Poruka\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: 220\n              },\n              children: \"Poslato\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: 160\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: filtered.map((n, i) => {\n            var _n$notificationId;\n            const id = (_n$notificationId = n.notificationId) !== null && _n$notificationId !== void 0 ? _n$notificationId : n.id;\n            const isRead = !!n.read;\n            const title = n.notificationTitle || n.title || \"—\";\n            const message = n.message || n.notificationMessage || n.body || \"—\";\n            const typeName = getTypeName(n);\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: isRead ? \"row-read\" : \"row-unread\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: i + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"col-title\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"title\",\n                  children: title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"col-type\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pill\",\n                  children: typeName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"col-message\",\n                children: message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"col-date\",\n                children: fmtDate(n.sentAt)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"col-actions\",\n                style: {\n                  textAlign: \"right\"\n                },\n                children: isRead ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"badge muted\",\n                  title: \"Pro\\u010Ditano\",\n                  children: \"Pro\\u010Ditano\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn ghost sm\",\n                  disabled: !!marking[id],\n                  onClick: () => handleMarkOne(id),\n                  title: \"Ozna\\u010Di pro\\u010Ditano\",\n                  children: marking[id] ? \"…\" : \"Označi pročitano\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 21\n              }, this)]\n            }, id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }, this);\n}\n_s(Notifications, \"oYuIcgS2jnXh2O9Il4pt8kKNz3s=\");\n_c = Notifications;\nvar _c;\n$RefreshReg$(_c, \"Notifications\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","Link","getMe","getNotifications","markNotificationRead","markAllNotificationsRead","getNotificationTypes","jsxDEV","_jsxDEV","Fragment","_Fragment","Notifications","_s","me","setMe","rows","setRows","loading","setLoading","error","setError","onlyUnread","setOnlyUnread","search","setSearch","sortKey","setSortKey","marking","setMarking","typesMap","setTypesMap","getTypeName","n","_ref","_ref2","_n$notificationTypeId","_n$type$notificationT","id","notificationTypeId","typeId","type","fmtDate","iso","d","Date","toLocaleString","dateStyle","timeStyle","mounted","then","list","map","forEach","t","name","catch","userId","u","Array","isArray","e","message","finally","filtered","q","trim","toLowerCase","out","filter","read","title","String","notificationTitle","msg","notificationMessage","body","typeName","includes","byTitle","a","b","localeCompare","byTypeName","byDate","da","sentAt","getTime","db","sort","reverse","handleMarkOne","m","prev","all","notificationId","console","handleMarkAll","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onClick","style","marginBottom","firstName","lastName","userEmail","display","gap","alignItems","placeholder","value","onChange","target","flex","minWidth","checked","label","length","width","i","_n$notificationId","isRead","textAlign","disabled","_c","$RefreshReg$"],"sources":["C:/Users/mikir/Documents/NetBeansProjects/NJT_Projekat/e_learning_platform_njt_frontend/src/pages/Notifications.jsx"],"sourcesContent":["// src/pages/Notifications.jsx\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  getMe,\r\n  getNotifications,\r\n  markNotificationRead,\r\n  markAllNotificationsRead,\r\n  getNotificationTypes,\r\n} from \"../api/api\";\r\nimport \"../css/Notifications.css\"; // ako već imaš; nije obavezno\r\n\r\nexport default function Notifications() {\r\n  const [me, setMe] = useState(null);\r\n\r\n  const [rows, setRows] = useState([]);         // Sirove notifikacije (sve za korisnika)\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const [onlyUnread, setOnlyUnread] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [sortKey, setSortKey] = useState(\"DATE_DESC\"); // DATE_DESC | DATE_ASC | TITLE_ASC | TITLE_DESC | TYPE_ASC | TYPE_DESC\r\n\r\n  const [marking, setMarking] = useState({});   // { [id]: true } dok traje POST\r\n\r\n  // Mapa tipova: { [typeId]: 'Payment Received' ... }\r\n  const [typesMap, setTypesMap] = useState({});\r\n\r\n  // ---- Helpers -----------------------------------------------------\r\n\r\n  function getTypeName(n) {\r\n    // pokrij moguće polja iz DTO-a\r\n    const id =\r\n      n.notificationTypeId ??\r\n      n.typeId ??\r\n      (n.type && (n.type.notificationTypeId ?? n.type.id)) ??\r\n      n.type;\r\n    return id && typesMap[id] ? typesMap[id] : \"—\";\r\n  }\r\n\r\n  function fmtDate(iso) {\r\n    if (!iso) return \"—\";\r\n    try {\r\n      const d = new Date(iso);\r\n      return d.toLocaleString(\"sr-RS\", { dateStyle: \"short\", timeStyle: \"short\" });\r\n    } catch {\r\n      return iso;\r\n    }\r\n  }\r\n\r\n  // ---- Učitavanje podataka ----------------------------------------\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    // 1) tipovi (jednom)\r\n    getNotificationTypes()\r\n      .then((list) => {\r\n        if (!mounted) return;\r\n        const map = {};\r\n        (list || []).forEach((t) => {\r\n          // backend vraća {id, name}\r\n          map[t.id] = t.name;\r\n        });\r\n        setTypesMap(map);\r\n      })\r\n      .catch(() => {\r\n        if (!mounted) return;\r\n        setTypesMap({});\r\n      });\r\n\r\n    // 2) korisnik + sve njegove notifikacije\r\n    getMe({ userId: 1 }) // dok nema auth-a\r\n      .then((u) => {\r\n        if (!mounted) return;\r\n        setMe(u);\r\n        return getNotifications({ userId: u.userId }); // Uzmemo SVE; filtriraćemo i sort. na klijentu\r\n      })\r\n      .then((list) => {\r\n        if (!mounted) return;\r\n        setRows(Array.isArray(list) ? list : []);\r\n      })\r\n      .catch((e) => {\r\n        if (!mounted) return;\r\n        setError(e?.message || \"Greška pri učitavanju notifikacija.\");\r\n      })\r\n      .finally(() => {\r\n        if (!mounted) return;\r\n        setLoading(false);\r\n      });\r\n\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  // ---- Pretraga/Filter/Sort na klijentu ---------------------------\r\n\r\n  const filtered = useMemo(() => {\r\n    const q = search.trim().toLowerCase();\r\n\r\n    let out = rows;\r\n\r\n    if (onlyUnread) {\r\n      out = out.filter((n) => !n.read);\r\n    }\r\n\r\n    if (q) {\r\n      out = out.filter((n) => {\r\n        const title = String(n.notificationTitle || n.title || \"\").toLowerCase();\r\n        const msg = String(n.message || n.notificationMessage || n.body || \"\").toLowerCase();\r\n        const typeName = getTypeName(n).toLowerCase();\r\n        return (\r\n          title.includes(q) ||\r\n          msg.includes(q) ||\r\n          typeName.includes(q)\r\n        );\r\n      });\r\n    }\r\n\r\n    const byTitle = (a, b) =>\r\n      String(a.notificationTitle || a.title || \"\").localeCompare(\r\n        String(b.notificationTitle || b.title || \"\"),\r\n        \"sr\"\r\n      );\r\n\r\n    const byTypeName = (a, b) =>\r\n      getTypeName(a).localeCompare(getTypeName(b), \"sr\");\r\n\r\n    const byDate = (a, b) => {\r\n      const da = a.sentAt ? new Date(a.sentAt).getTime() : 0;\r\n      const db = b.sentAt ? new Date(b.sentAt).getTime() : 0;\r\n      return da - db;\r\n    };\r\n\r\n    switch (sortKey) {\r\n      case \"TITLE_ASC\":\r\n        out = [...out].sort(byTitle);\r\n        break;\r\n      case \"TITLE_DESC\":\r\n        out = [...out].sort(byTitle).reverse();\r\n        break;\r\n      case \"TYPE_ASC\":\r\n        out = [...out].sort(byTypeName);\r\n        break;\r\n      case \"TYPE_DESC\":\r\n        out = [...out].sort(byTypeName).reverse();\r\n        break;\r\n      case \"DATE_ASC\":\r\n        out = [...out].sort(byDate); // starije prvo\r\n        break;\r\n      case \"DATE_DESC\":\r\n      default:\r\n        out = [...out].sort(byDate).reverse(); // novije prvo\r\n        break;\r\n    }\r\n\r\n    return out;\r\n  }, [rows, onlyUnread, search, sortKey, typesMap]);\r\n\r\n  // ---- Akcije ------------------------------------------------------\r\n\r\n  async function handleMarkOne(id) {\r\n    setMarking((m) => ({ ...m, [id]: true }));\r\n    // Optimistički update: postavi read=true lokalno\r\n    const prev = rows;\r\n    setRows((all) =>\r\n      all.map((n) => (n.notificationId === id || n.id === id ? { ...n, read: true } : n))\r\n    );\r\n    try {\r\n      await markNotificationRead(id);\r\n    } catch (e) {\r\n      // Vrati staro stanje ako padne\r\n      setRows(prev);\r\n      console.error(e);\r\n    } finally {\r\n      setMarking((m) => ({ ...m, [id]: false }));\r\n    }\r\n  }\r\n\r\n  async function handleMarkAll() {\r\n    if (!me) return;\r\n    try {\r\n      await markAllNotificationsRead(me.userId);\r\n      setRows((all) => all.map((n) => ({ ...n, read: true })));\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(\"Greška pri označavanju svih notifikacija.\");\r\n    }\r\n  }\r\n\r\n  // ---- Render ------------------------------------------------------\r\n\r\n  return (\r\n    <div className=\"container section notifications-page\">\r\n      <div className=\"header-row\">\r\n        <h1>Notifikacije</h1>\r\n        <div className=\"header-actions\">\r\n          <Link className=\"btn ghost\" to=\"/\">Nazad na početnu</Link>\r\n          <button className=\"btn primary\" onClick={handleMarkAll}>\r\n            Označi sve kao pročitano\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"user-line muted\" style={{ marginBottom: 16 }}>\r\n        {me ? (\r\n          <>\r\n            {me.firstName} {me.lastName} • {me.userEmail}\r\n          </>\r\n        ) : (\r\n          <>Učitavanje korisnika…</>\r\n        )}\r\n      </div>\r\n\r\n      {/* Kontrole: pretraga / samo nepročitane / sort */}\r\n      <div className=\"controls\" style={{ display: \"flex\", gap: 16, alignItems: \"center\", marginBottom: 12 }}>\r\n        <input\r\n          className=\"input\"\r\n          type=\"text\"\r\n          placeholder=\"Pretraga po naslovu, poruci ili tipu…\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          style={{ flex: 1, minWidth: 260 }}\r\n        />\r\n\r\n        <label className=\"toggle muted\" style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={onlyUnread}\r\n            onChange={(e) => setOnlyUnread(e.target.checked)}\r\n          />\r\n          <span>Samo nepročitane</span>\r\n        </label>\r\n\r\n        <label className=\"muted\" style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n          Sort:\r\n          <select\r\n            className=\"input\"\r\n            value={sortKey}\r\n            onChange={(e) => setSortKey(e.target.value)}\r\n          >\r\n            <optgroup label=\"Naslov\">\r\n              <option value=\"TITLE_ASC\">Naslov A–Š</option>\r\n              <option value=\"TITLE_DESC\">Naslov Š–A</option>\r\n            </optgroup>\r\n            <optgroup label=\"Datum\">\r\n              <option value=\"DATE_DESC\">Najnovije</option>\r\n              <option value=\"DATE_ASC\">Najstarije</option>\r\n            </optgroup>\r\n            <optgroup label=\"Tip\">\r\n              <option value=\"TYPE_ASC\">Tip A–Š</option>\r\n              <option value=\"TYPE_DESC\">Tip Š–A</option>\r\n            </optgroup>\r\n          </select>\r\n        </label>\r\n      </div>\r\n\r\n      {/* Stanja učitavanja / greške / prazno */}\r\n      {loading && <div className=\"alert info\">Učitavam notifikacije…</div>}\r\n      {!!error && <div className=\"alert error\">{error}</div>}\r\n      {!loading && filtered.length === 0 && (\r\n        <div className=\"alert muted\">Nema notifikacija za prikaz.</div>\r\n      )}\r\n\r\n      {/* Tabela */}\r\n      {!loading && filtered.length > 0 && (\r\n        <div className=\"card\">\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th style={{ width: 48 }}>#</th>\r\n                <th>Naslov</th>\r\n                <th style={{ width: 190 }}>Tip</th>\r\n                <th>Poruka</th>\r\n                <th style={{ width: 220 }}>Poslato</th>\r\n                <th style={{ width: 160 }}></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filtered.map((n, i) => {\r\n                const id = n.notificationId ?? n.id;\r\n                const isRead = !!n.read;\r\n                const title = n.notificationTitle || n.title || \"—\";\r\n                const message = n.message || n.notificationMessage || n.body || \"—\";\r\n                const typeName = getTypeName(n);\r\n\r\n                return (\r\n                  <tr key={id} className={isRead ? \"row-read\" : \"row-unread\"}>\r\n                    <td>{i + 1}</td>\r\n                    <td className=\"col-title\">\r\n                      <div className=\"title\">{title}</div>\r\n                    </td>\r\n                    <td className=\"col-type\">\r\n                      <span className=\"pill\">{typeName}</span>\r\n                    </td>\r\n                    <td className=\"col-message\">\r\n                      {message}\r\n                    </td>\r\n                    <td className=\"col-date\">\r\n                      {fmtDate(n.sentAt)}\r\n                    </td>\r\n                    <td className=\"col-actions\" style={{ textAlign: \"right\" }}>\r\n                      {isRead ? (\r\n                        <span className=\"badge muted\" title=\"Pročitano\">\r\n                          Pročitano\r\n                        </span>\r\n                      ) : (\r\n                        <button\r\n                          className=\"btn ghost sm\"\r\n                          disabled={!!marking[id]}\r\n                          onClick={() => handleMarkOne(id)}\r\n                          title=\"Označi pročitano\"\r\n                        >\r\n                          {marking[id] ? \"…\" : \"Označi pročitano\"}\r\n                        </button>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SACEC,KAAK,EACLC,gBAAgB,EAChBC,oBAAoB,EACpBC,wBAAwB,EACxBC,oBAAoB,QACf,YAAY;AACnB,OAAO,0BAA0B,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEnC,eAAe,SAASC,aAAaA,CAAA,EAAG;EAAAC,EAAA;EACtC,MAAM,CAACC,EAAE,EAAEC,KAAK,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAElC,MAAM,CAACe,IAAI,EAAEC,OAAO,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAS;EAC9C,MAAM,CAACiB,OAAO,EAAEC,UAAU,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACmB,KAAK,EAAEC,QAAQ,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EAEtC,MAAM,CAACqB,UAAU,EAAEC,aAAa,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACuB,MAAM,EAAEC,SAAS,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACyB,OAAO,EAAEC,UAAU,CAAC,GAAG1B,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;;EAErD,MAAM,CAAC2B,OAAO,EAAEC,UAAU,CAAC,GAAG5B,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAG;;EAE9C;EACA,MAAM,CAAC6B,QAAQ,EAAEC,WAAW,CAAC,GAAG9B,QAAQ,CAAC,CAAC,CAAC,CAAC;;EAE5C;;EAEA,SAAS+B,WAAWA,CAACC,CAAC,EAAE;IAAA,IAAAC,IAAA,EAAAC,KAAA,EAAAC,qBAAA,EAAAC,qBAAA;IACtB;IACA,MAAMC,EAAE,IAAAJ,IAAA,IAAAC,KAAA,IAAAC,qBAAA,GACNH,CAAC,CAACM,kBAAkB,cAAAH,qBAAA,cAAAA,qBAAA,GACpBH,CAAC,CAACO,MAAM,cAAAL,KAAA,cAAAA,KAAA,GACPF,CAAC,CAACQ,IAAI,MAAAJ,qBAAA,GAAKJ,CAAC,CAACQ,IAAI,CAACF,kBAAkB,cAAAF,qBAAA,cAAAA,qBAAA,GAAIJ,CAAC,CAACQ,IAAI,CAACH,EAAE,CAAC,cAAAJ,IAAA,cAAAA,IAAA,GACnDD,CAAC,CAACQ,IAAI;IACR,OAAOH,EAAE,IAAIR,QAAQ,CAACQ,EAAE,CAAC,GAAGR,QAAQ,CAACQ,EAAE,CAAC,GAAG,GAAG;EAChD;EAEA,SAASI,OAAOA,CAACC,GAAG,EAAE;IACpB,IAAI,CAACA,GAAG,EAAE,OAAO,GAAG;IACpB,IAAI;MACF,MAAMC,CAAC,GAAG,IAAIC,IAAI,CAACF,GAAG,CAAC;MACvB,OAAOC,CAAC,CAACE,cAAc,CAAC,OAAO,EAAE;QAAEC,SAAS,EAAE,OAAO;QAAEC,SAAS,EAAE;MAAQ,CAAC,CAAC;IAC9E,CAAC,CAAC,MAAM;MACN,OAAOL,GAAG;IACZ;EACF;;EAEA;;EAEA5C,SAAS,CAAC,MAAM;IACd,IAAIkD,OAAO,GAAG,IAAI;IAClB9B,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,EAAE,CAAC;;IAEZ;IACAd,oBAAoB,CAAC,CAAC,CACnB2C,IAAI,CAAEC,IAAI,IAAK;MACd,IAAI,CAACF,OAAO,EAAE;MACd,MAAMG,GAAG,GAAG,CAAC,CAAC;MACd,CAACD,IAAI,IAAI,EAAE,EAAEE,OAAO,CAAEC,CAAC,IAAK;QAC1B;QACAF,GAAG,CAACE,CAAC,CAAChB,EAAE,CAAC,GAAGgB,CAAC,CAACC,IAAI;MACpB,CAAC,CAAC;MACFxB,WAAW,CAACqB,GAAG,CAAC;IAClB,CAAC,CAAC,CACDI,KAAK,CAAC,MAAM;MACX,IAAI,CAACP,OAAO,EAAE;MACdlB,WAAW,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,CAAC;;IAEJ;IACA5B,KAAK,CAAC;MAAEsD,MAAM,EAAE;IAAE,CAAC,CAAC,CAAC;IAAA,CAClBP,IAAI,CAAEQ,CAAC,IAAK;MACX,IAAI,CAACT,OAAO,EAAE;MACdlC,KAAK,CAAC2C,CAAC,CAAC;MACR,OAAOtD,gBAAgB,CAAC;QAAEqD,MAAM,EAAEC,CAAC,CAACD;MAAO,CAAC,CAAC,CAAC,CAAC;IACjD,CAAC,CAAC,CACDP,IAAI,CAAEC,IAAI,IAAK;MACd,IAAI,CAACF,OAAO,EAAE;MACdhC,OAAO,CAAC0C,KAAK,CAACC,OAAO,CAACT,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE,CAAC;IAC1C,CAAC,CAAC,CACDK,KAAK,CAAEK,CAAC,IAAK;MACZ,IAAI,CAACZ,OAAO,EAAE;MACd5B,QAAQ,CAAC,CAAAwC,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEC,OAAO,KAAI,qCAAqC,CAAC;IAC/D,CAAC,CAAC,CACDC,OAAO,CAAC,MAAM;MACb,IAAI,CAACd,OAAO,EAAE;MACd9B,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC;IAEJ,OAAO,MAAM;MACX8B,OAAO,GAAG,KAAK;IACjB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;;EAEN;;EAEA,MAAMe,QAAQ,GAAGhE,OAAO,CAAC,MAAM;IAC7B,MAAMiE,CAAC,GAAGzC,MAAM,CAAC0C,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;IAErC,IAAIC,GAAG,GAAGpD,IAAI;IAEd,IAAIM,UAAU,EAAE;MACd8C,GAAG,GAAGA,GAAG,CAACC,MAAM,CAAEpC,CAAC,IAAK,CAACA,CAAC,CAACqC,IAAI,CAAC;IAClC;IAEA,IAAIL,CAAC,EAAE;MACLG,GAAG,GAAGA,GAAG,CAACC,MAAM,CAAEpC,CAAC,IAAK;QACtB,MAAMsC,KAAK,GAAGC,MAAM,CAACvC,CAAC,CAACwC,iBAAiB,IAAIxC,CAAC,CAACsC,KAAK,IAAI,EAAE,CAAC,CAACJ,WAAW,CAAC,CAAC;QACxE,MAAMO,GAAG,GAAGF,MAAM,CAACvC,CAAC,CAAC6B,OAAO,IAAI7B,CAAC,CAAC0C,mBAAmB,IAAI1C,CAAC,CAAC2C,IAAI,IAAI,EAAE,CAAC,CAACT,WAAW,CAAC,CAAC;QACpF,MAAMU,QAAQ,GAAG7C,WAAW,CAACC,CAAC,CAAC,CAACkC,WAAW,CAAC,CAAC;QAC7C,OACEI,KAAK,CAACO,QAAQ,CAACb,CAAC,CAAC,IACjBS,GAAG,CAACI,QAAQ,CAACb,CAAC,CAAC,IACfY,QAAQ,CAACC,QAAQ,CAACb,CAAC,CAAC;MAExB,CAAC,CAAC;IACJ;IAEA,MAAMc,OAAO,GAAGA,CAACC,CAAC,EAAEC,CAAC,KACnBT,MAAM,CAACQ,CAAC,CAACP,iBAAiB,IAAIO,CAAC,CAACT,KAAK,IAAI,EAAE,CAAC,CAACW,aAAa,CACxDV,MAAM,CAACS,CAAC,CAACR,iBAAiB,IAAIQ,CAAC,CAACV,KAAK,IAAI,EAAE,CAAC,EAC5C,IACF,CAAC;IAEH,MAAMY,UAAU,GAAGA,CAACH,CAAC,EAAEC,CAAC,KACtBjD,WAAW,CAACgD,CAAC,CAAC,CAACE,aAAa,CAAClD,WAAW,CAACiD,CAAC,CAAC,EAAE,IAAI,CAAC;IAEpD,MAAMG,MAAM,GAAGA,CAACJ,CAAC,EAAEC,CAAC,KAAK;MACvB,MAAMI,EAAE,GAAGL,CAAC,CAACM,MAAM,GAAG,IAAIzC,IAAI,CAACmC,CAAC,CAACM,MAAM,CAAC,CAACC,OAAO,CAAC,CAAC,GAAG,CAAC;MACtD,MAAMC,EAAE,GAAGP,CAAC,CAACK,MAAM,GAAG,IAAIzC,IAAI,CAACoC,CAAC,CAACK,MAAM,CAAC,CAACC,OAAO,CAAC,CAAC,GAAG,CAAC;MACtD,OAAOF,EAAE,GAAGG,EAAE;IAChB,CAAC;IAED,QAAQ9D,OAAO;MACb,KAAK,WAAW;QACd0C,GAAG,GAAG,CAAC,GAAGA,GAAG,CAAC,CAACqB,IAAI,CAACV,OAAO,CAAC;QAC5B;MACF,KAAK,YAAY;QACfX,GAAG,GAAG,CAAC,GAAGA,GAAG,CAAC,CAACqB,IAAI,CAACV,OAAO,CAAC,CAACW,OAAO,CAAC,CAAC;QACtC;MACF,KAAK,UAAU;QACbtB,GAAG,GAAG,CAAC,GAAGA,GAAG,CAAC,CAACqB,IAAI,CAACN,UAAU,CAAC;QAC/B;MACF,KAAK,WAAW;QACdf,GAAG,GAAG,CAAC,GAAGA,GAAG,CAAC,CAACqB,IAAI,CAACN,UAAU,CAAC,CAACO,OAAO,CAAC,CAAC;QACzC;MACF,KAAK,UAAU;QACbtB,GAAG,GAAG,CAAC,GAAGA,GAAG,CAAC,CAACqB,IAAI,CAACL,MAAM,CAAC,CAAC,CAAC;QAC7B;MACF,KAAK,WAAW;MAChB;QACEhB,GAAG,GAAG,CAAC,GAAGA,GAAG,CAAC,CAACqB,IAAI,CAACL,MAAM,CAAC,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC;QACvC;IACJ;IAEA,OAAOtB,GAAG;EACZ,CAAC,EAAE,CAACpD,IAAI,EAAEM,UAAU,EAAEE,MAAM,EAAEE,OAAO,EAAEI,QAAQ,CAAC,CAAC;;EAEjD;;EAEA,eAAe6D,aAAaA,CAACrD,EAAE,EAAE;IAC/BT,UAAU,CAAE+D,CAAC,KAAM;MAAE,GAAGA,CAAC;MAAE,CAACtD,EAAE,GAAG;IAAK,CAAC,CAAC,CAAC;IACzC;IACA,MAAMuD,IAAI,GAAG7E,IAAI;IACjBC,OAAO,CAAE6E,GAAG,IACVA,GAAG,CAAC1C,GAAG,CAAEnB,CAAC,IAAMA,CAAC,CAAC8D,cAAc,KAAKzD,EAAE,IAAIL,CAAC,CAACK,EAAE,KAAKA,EAAE,GAAG;MAAE,GAAGL,CAAC;MAAEqC,IAAI,EAAE;IAAK,CAAC,GAAGrC,CAAE,CACpF,CAAC;IACD,IAAI;MACF,MAAM5B,oBAAoB,CAACiC,EAAE,CAAC;IAChC,CAAC,CAAC,OAAOuB,CAAC,EAAE;MACV;MACA5C,OAAO,CAAC4E,IAAI,CAAC;MACbG,OAAO,CAAC5E,KAAK,CAACyC,CAAC,CAAC;IAClB,CAAC,SAAS;MACRhC,UAAU,CAAE+D,CAAC,KAAM;QAAE,GAAGA,CAAC;QAAE,CAACtD,EAAE,GAAG;MAAM,CAAC,CAAC,CAAC;IAC5C;EACF;EAEA,eAAe2D,aAAaA,CAAA,EAAG;IAC7B,IAAI,CAACnF,EAAE,EAAE;IACT,IAAI;MACF,MAAMR,wBAAwB,CAACQ,EAAE,CAAC2C,MAAM,CAAC;MACzCxC,OAAO,CAAE6E,GAAG,IAAKA,GAAG,CAAC1C,GAAG,CAAEnB,CAAC,KAAM;QAAE,GAAGA,CAAC;QAAEqC,IAAI,EAAE;MAAK,CAAC,CAAC,CAAC,CAAC;IAC1D,CAAC,CAAC,OAAOT,CAAC,EAAE;MACVmC,OAAO,CAAC5E,KAAK,CAACyC,CAAC,CAAC;MAChBqC,KAAK,CAAC,2CAA2C,CAAC;IACpD;EACF;;EAEA;;EAEA,oBACEzF,OAAA;IAAK0F,SAAS,EAAC,sCAAsC;IAAAC,QAAA,gBACnD3F,OAAA;MAAK0F,SAAS,EAAC,YAAY;MAAAC,QAAA,gBACzB3F,OAAA;QAAA2F,QAAA,EAAI;MAAY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACrB/F,OAAA;QAAK0F,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7B3F,OAAA,CAACP,IAAI;UAACiG,SAAS,EAAC,WAAW;UAACM,EAAE,EAAC,GAAG;UAAAL,QAAA,EAAC;QAAgB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC1D/F,OAAA;UAAQ0F,SAAS,EAAC,aAAa;UAACO,OAAO,EAAET,aAAc;UAAAG,QAAA,EAAC;QAExD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAEN/F,OAAA;MAAK0F,SAAS,EAAC,iBAAiB;MAACQ,KAAK,EAAE;QAAEC,YAAY,EAAE;MAAG,CAAE;MAAAR,QAAA,EAC1DtF,EAAE,gBACDL,OAAA,CAAAE,SAAA;QAAAyF,QAAA,GACGtF,EAAE,CAAC+F,SAAS,EAAC,GAAC,EAAC/F,EAAE,CAACgG,QAAQ,EAAC,UAAG,EAAChG,EAAE,CAACiG,SAAS;MAAA,eAC5C,CAAC,gBAEHtG,OAAA,CAAAE,SAAA;QAAAyF,QAAA,EAAE;MAAqB,gBAAE;IAC1B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAGN/F,OAAA;MAAK0F,SAAS,EAAC,UAAU;MAACQ,KAAK,EAAE;QAAEK,OAAO,EAAE,MAAM;QAAEC,GAAG,EAAE,EAAE;QAAEC,UAAU,EAAE,QAAQ;QAAEN,YAAY,EAAE;MAAG,CAAE;MAAAR,QAAA,gBACpG3F,OAAA;QACE0F,SAAS,EAAC,OAAO;QACjB1D,IAAI,EAAC,MAAM;QACX0E,WAAW,EAAC,4CAAuC;QACnDC,KAAK,EAAE5F,MAAO;QACd6F,QAAQ,EAAGxD,CAAC,IAAKpC,SAAS,CAACoC,CAAC,CAACyD,MAAM,CAACF,KAAK,CAAE;QAC3CT,KAAK,EAAE;UAAEY,IAAI,EAAE,CAAC;UAAEC,QAAQ,EAAE;QAAI;MAAE;QAAAnB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnC,CAAC,eAEF/F,OAAA;QAAO0F,SAAS,EAAC,cAAc;QAACQ,KAAK,EAAE;UAAEK,OAAO,EAAE,MAAM;UAAEC,GAAG,EAAE,CAAC;UAAEC,UAAU,EAAE;QAAS,CAAE;QAAAd,QAAA,gBACvF3F,OAAA;UACEgC,IAAI,EAAC,UAAU;UACfgF,OAAO,EAAEnG,UAAW;UACpB+F,QAAQ,EAAGxD,CAAC,IAAKtC,aAAa,CAACsC,CAAC,CAACyD,MAAM,CAACG,OAAO;QAAE;UAAApB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClD,CAAC,eACF/F,OAAA;UAAA2F,QAAA,EAAM;QAAgB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC,eAER/F,OAAA;QAAO0F,SAAS,EAAC,OAAO;QAACQ,KAAK,EAAE;UAAEK,OAAO,EAAE,MAAM;UAAEC,GAAG,EAAE,CAAC;UAAEC,UAAU,EAAE;QAAS,CAAE;QAAAd,QAAA,GAAC,OAEjF,eAAA3F,OAAA;UACE0F,SAAS,EAAC,OAAO;UACjBiB,KAAK,EAAE1F,OAAQ;UACf2F,QAAQ,EAAGxD,CAAC,IAAKlC,UAAU,CAACkC,CAAC,CAACyD,MAAM,CAACF,KAAK,CAAE;UAAAhB,QAAA,gBAE5C3F,OAAA;YAAUiH,KAAK,EAAC,QAAQ;YAAAtB,QAAA,gBACtB3F,OAAA;cAAQ2G,KAAK,EAAC,WAAW;cAAAhB,QAAA,EAAC;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC7C/F,OAAA;cAAQ2G,KAAK,EAAC,YAAY;cAAAhB,QAAA,EAAC;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtC,CAAC,eACX/F,OAAA;YAAUiH,KAAK,EAAC,OAAO;YAAAtB,QAAA,gBACrB3F,OAAA;cAAQ2G,KAAK,EAAC,WAAW;cAAAhB,QAAA,EAAC;YAAS;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC5C/F,OAAA;cAAQ2G,KAAK,EAAC,UAAU;cAAAhB,QAAA,EAAC;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpC,CAAC,eACX/F,OAAA;YAAUiH,KAAK,EAAC,KAAK;YAAAtB,QAAA,gBACnB3F,OAAA;cAAQ2G,KAAK,EAAC,UAAU;cAAAhB,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACzC/F,OAAA;cAAQ2G,KAAK,EAAC,WAAW;cAAAhB,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,EAGLtF,OAAO,iBAAIT,OAAA;MAAK0F,SAAS,EAAC,YAAY;MAAAC,QAAA,EAAC;IAAsB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,EACnE,CAAC,CAACpF,KAAK,iBAAIX,OAAA;MAAK0F,SAAS,EAAC,aAAa;MAAAC,QAAA,EAAEhF;IAAK;MAAAiF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EACrD,CAACtF,OAAO,IAAI8C,QAAQ,CAAC2D,MAAM,KAAK,CAAC,iBAChClH,OAAA;MAAK0F,SAAS,EAAC,aAAa;MAAAC,QAAA,EAAC;IAA4B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAC/D,EAGA,CAACtF,OAAO,IAAI8C,QAAQ,CAAC2D,MAAM,GAAG,CAAC,iBAC9BlH,OAAA;MAAK0F,SAAS,EAAC,MAAM;MAAAC,QAAA,eACnB3F,OAAA;QAAO0F,SAAS,EAAC,OAAO;QAAAC,QAAA,gBACtB3F,OAAA;UAAA2F,QAAA,eACE3F,OAAA;YAAA2F,QAAA,gBACE3F,OAAA;cAAIkG,KAAK,EAAE;gBAAEiB,KAAK,EAAE;cAAG,CAAE;cAAAxB,QAAA,EAAC;YAAC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAChC/F,OAAA;cAAA2F,QAAA,EAAI;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACf/F,OAAA;cAAIkG,KAAK,EAAE;gBAAEiB,KAAK,EAAE;cAAI,CAAE;cAAAxB,QAAA,EAAC;YAAG;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACnC/F,OAAA;cAAA2F,QAAA,EAAI;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACf/F,OAAA;cAAIkG,KAAK,EAAE;gBAAEiB,KAAK,EAAE;cAAI,CAAE;cAAAxB,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACvC/F,OAAA;cAAIkG,KAAK,EAAE;gBAAEiB,KAAK,EAAE;cAAI;YAAE;cAAAvB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC9B;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eACR/F,OAAA;UAAA2F,QAAA,EACGpC,QAAQ,CAACZ,GAAG,CAAC,CAACnB,CAAC,EAAE4F,CAAC,KAAK;YAAA,IAAAC,iBAAA;YACtB,MAAMxF,EAAE,IAAAwF,iBAAA,GAAG7F,CAAC,CAAC8D,cAAc,cAAA+B,iBAAA,cAAAA,iBAAA,GAAI7F,CAAC,CAACK,EAAE;YACnC,MAAMyF,MAAM,GAAG,CAAC,CAAC9F,CAAC,CAACqC,IAAI;YACvB,MAAMC,KAAK,GAAGtC,CAAC,CAACwC,iBAAiB,IAAIxC,CAAC,CAACsC,KAAK,IAAI,GAAG;YACnD,MAAMT,OAAO,GAAG7B,CAAC,CAAC6B,OAAO,IAAI7B,CAAC,CAAC0C,mBAAmB,IAAI1C,CAAC,CAAC2C,IAAI,IAAI,GAAG;YACnE,MAAMC,QAAQ,GAAG7C,WAAW,CAACC,CAAC,CAAC;YAE/B,oBACExB,OAAA;cAAa0F,SAAS,EAAE4B,MAAM,GAAG,UAAU,GAAG,YAAa;cAAA3B,QAAA,gBACzD3F,OAAA;gBAAA2F,QAAA,EAAKyB,CAAC,GAAG;cAAC;gBAAAxB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAChB/F,OAAA;gBAAI0F,SAAS,EAAC,WAAW;gBAAAC,QAAA,eACvB3F,OAAA;kBAAK0F,SAAS,EAAC,OAAO;kBAAAC,QAAA,EAAE7B;gBAAK;kBAAA8B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClC,CAAC,eACL/F,OAAA;gBAAI0F,SAAS,EAAC,UAAU;gBAAAC,QAAA,eACtB3F,OAAA;kBAAM0F,SAAS,EAAC,MAAM;kBAAAC,QAAA,EAAEvB;gBAAQ;kBAAAwB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtC,CAAC,eACL/F,OAAA;gBAAI0F,SAAS,EAAC,aAAa;gBAAAC,QAAA,EACxBtC;cAAO;gBAAAuC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACL/F,OAAA;gBAAI0F,SAAS,EAAC,UAAU;gBAAAC,QAAA,EACrB1D,OAAO,CAACT,CAAC,CAACqD,MAAM;cAAC;gBAAAe,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChB,CAAC,eACL/F,OAAA;gBAAI0F,SAAS,EAAC,aAAa;gBAACQ,KAAK,EAAE;kBAAEqB,SAAS,EAAE;gBAAQ,CAAE;gBAAA5B,QAAA,EACvD2B,MAAM,gBACLtH,OAAA;kBAAM0F,SAAS,EAAC,aAAa;kBAAC5B,KAAK,EAAC,gBAAW;kBAAA6B,QAAA,EAAC;gBAEhD;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,gBAEP/F,OAAA;kBACE0F,SAAS,EAAC,cAAc;kBACxB8B,QAAQ,EAAE,CAAC,CAACrG,OAAO,CAACU,EAAE,CAAE;kBACxBoE,OAAO,EAAEA,CAAA,KAAMf,aAAa,CAACrD,EAAE,CAAE;kBACjCiC,KAAK,EAAC,4BAAkB;kBAAA6B,QAAA,EAEvBxE,OAAO,CAACU,EAAE,CAAC,GAAG,GAAG,GAAG;gBAAkB;kBAAA+D,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACjC;cACT;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA,GA7BElE,EAAE;cAAA+D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OA8BP,CAAC;UAET,CAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC3F,EAAA,CA7TuBD,aAAa;AAAAsH,EAAA,GAAbtH,aAAa;AAAA,IAAAsH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}